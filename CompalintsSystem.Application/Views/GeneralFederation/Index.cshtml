<!-- Content -->
@{
    ViewData["Title"] = "الإحصائات";

}

<div class="container-xxl flex-grow-1 container-p-y">
    <style>
    .breadcrumb-wrapper {
        background-color: #E2ECF7; /* لون خلفية البطاقة */
        padding: 15px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* ظل لتحسين المظهر */
    }

    .breadcrumb-text {
        color: #495057; /* لون النص الرئيسي */
        font-size: 20px;
        margin: 0;
    }

    .breadcrumb-separator {
        margin: 0 3px;
        color: #6C757D; /* لون الفاصل */
    }
</style>

<h4 class="breadcrumb-wrapper py-3 mb-4">
    <p class="breadcrumb-text">الاحصائات العامة للنظام</p>
</h4>


    <div class="row g-4 mb-4">

       
        <div class="col-sm-6 col-xl-3">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="content-left">
                            <span> عدد المستخدمين  </span>
                            <div class="d-flex align-items-end mt-2">
                                <h4 class="me-2 mb-0">@ViewBag.totalUsers</h4>
                            </div>
                        </div>
                        <span class="badge bg-label-success rounded p-2">
                            <i class="bx bx-group bx-sm"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-xl-3">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="content-left">
                            <span> عدد الشكاوي  </span>
                            <div class="d-flex align-items-end mt-2">
                                <h4 class="me-2 mb-0"> @ViewBag.totalComp</h4>
                            </div>
                        </div>
                        <span class="badge bg-label-warning rounded p-2">
                            <i class="bx bx-user-voice bx-sm"></i>
                        </span>
                    </div>
                </div>
                <div id="incomeChart"></div>
            </div>
        </div>
        <div class="col-sm-6 col-xl-3">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="content-left">
                            <span> عدد البلاغات  </span>
                            <div class="d-flex align-items-end mt-2">
                                <h4 class="me-2 mb-0">@ViewBag.TotalCommun</h4>
                            </div>
                        </div>
                        <span class="badge bg-label-warning rounded p-2">
                            <i class="bx bx-user-voice bx-sm"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-5">


        <!--user all-->
        <div class="col-md-6 col-lg-6 col-xl-4 mb-4 mb-xl-0">
            <div class="card h-100">
                <div class="card-header">
                    <div class="content-left">
                            <span> إجمالي المستخدمين  </span>
                            <div class="d-flex align-items-end mt-2">
                                <h4 class="me-2 mb-0"> @ViewBag.Users</h4>
                            </div>
                        </div>
                    
                 
                </div>
                <div class="card-body">
                    <span class="d-block mb-2">الاحصائات الحالية</span>
                    <div >
                        <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0"></div>
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-info" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-warning" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <ul class="p-0 m-0">
                        @foreach (var item in ViewBag.totalGovermentuser)
                        {
                            <li class="d-flex justify-content-between mb-3">
                                <div class="lh-1 d-flex align-items-center me-3">
                                    <span class="badge badge-dot bg-success me-2"></span> @item.Name
                                </div>
                                <div class="gap-3 d-flex">
                                    <span>@item.totalUsers</span>
                                     <div class="d-flex align-items-end mt-2">
                                    <span class="fw-semibold">%   @(Math.Round(@item.Users, 2))</span>
                                </div> </div>
                            </li>

                        }


                    </ul>
                </div>
            </div>
        </div>

        <!--user all-->
        <!--user all-->
        <div class="col-md-6 col-lg-6 col-xl-4 mb-4 mb-xl-0">
            <div class="card h-100">
                  <div class="card-header">
                <div class="content-left">
                    <span> إاحصائيات انواع الموضفين  </span>
                            
                            <div class="d-flex align-items-end mt-2">
                                <h4 class="me-2 mb-0">@ViewBag.TotalCountByRoles </h4>
                            </div>
                        </div></div>
                
                <div class="card-body">
                    <span class="d-block mb-2">الاحصائات الحالية</span>
                    <div >
                        <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-info" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-warning" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <ul class="p-0 m-0">
                        @*@foreach (var item in ViewBag.totalUserByRoles)
        {
            <li class="d-flex justify-content-between mb-3">
                <div class="lh-1 d-flex align-items-center me-3">
                    <span class="badge badge-dot bg-success me-2"></span> @item.RoleName
                </div>
                <div class="gap-3 d-flex">
                    <span>@item.TotalCount</span>
                    <span class="fw-semibold">%@(Math.Round(@item.RolsTot, 2))</span>
                </div>
            </li>

        }*@

                        @foreach (var item in ViewBag.UserByRoles)
                        {
                            <li class="d-flex justify-content-between mb-3">
                                <div class="lh-1 d-flex align-items-center me-3">
                                    <span class="badge badge-dot bg-success me-2"></span> @item.RoleName
                                </div>
                               
                                <div class="gap-3 d-flex">
                                    <span>@item.TotalCount</span>
                                    <span class="fw-semibold">%@(Math.Round(item.RolsTot, 2))</span>
                                </div>
                            </li>
                        }


                    </ul>
                </div>
            </div>
        </div>

        <!--user all-->
        <!--user all-->
        <div class="col-md-6 col-lg-6 col-xl-4 mb-4 mb-xl-0">
            <div class="card h-100">
                  <div class="card-header">
                <div class="content-left">
                            <span> إاحصائيات انواع الشكاوى  </span>
                            <div class="d-flex align-items-end mt-2">
                                <h4 class="me-2 mb-0"> @ViewBag.Totalcomplant</h4>
                            </div>
                        </div> </div>
                
                <div class="card-body">
                    <span class="d-block mb-2">الاحصائات الحالية</span>
                    <div >
                        <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-info" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-warning" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <ul class="p-0 m-0">
                        @foreach (var item in ViewBag.GrapComplanrType)
                        {
                            <li class="d-flex justify-content-between mb-3">
                                <div class="lh-1 d-flex align-items-center me-3">
                                    <span class="badge badge-dot bg-success me-2"></span> @item.Name
                                </div>
                                <div class="gap-3 d-flex">
                                    <span>@item.TotalCount</span>
                                    <span class="fw-semibold">%@(Math.Round(@item.TypeComp, 2))</span>
                                </div>
                            </li>

                        }


                    </ul>
                </div>
            </div>
        </div>

        <!--user all-->
        <!--user all-->
        <div class="col-md-6 col-lg-6 col-xl-4 mb-4 mt-4 mb-xl-0 ">
            <div class="card h-100">
                <div class="card-header">
                     <div class="content-left">
                            <span> حالات الشكاوى  </span>
                            <div class="d-flex align-items-end mt-2">
                                <h4 class="me-2 mb-0"> @ViewBag.TotalStutusComplant</h4>
                            </div>
                        </div>
                
                    
                </div>
                <div class="card-body">

                    @*<span class="d-block mb-2">الاحصائات الحالية</span>*@
                    <div >
                        <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-info" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-warning" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <ul class="p-0 m-0">
                        @foreach (var item in ViewBag.GrapComplanrStutus)
                        {
                            <li class="d-flex justify-content-between mb-3">
                                <div class="lh-1 d-flex align-items-center me-3">
                                    <span class="badge badge-dot bg-success me-2"></span> @item.Name
                                </div>
                                <div class="gap-3 d-flex">
                                    <span>@item.TotalCountStutus</span>
                                    <span class="fw-semibold">%@item.stutus</span>
                                </div>
                            </li>

                        }

                    </ul>
                </div>
            </div>
        </div>


        <!--user all-->
        <!--user all-->
        <div class="col-md-6 col-lg-6 col-xl-4 mb-4 mt-4 mb-xl-0 ">
            <div class="card h-100">
                <div class="card-header">
                     <div class="content-left">
                            <span> البلاغات  </span>
                            <div class="d-flex align-items-end mt-2">
                                <h4 class="me-2 mb-0"> @ViewBag.TotalCommun</h4>
                            </div>
                        </div>
                
                    
                </div>
                
                
                <div class="card-body">
                    <span class="d-block mb-2"> البلاغات من الكليات</span>
                    <div >
                        <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-info" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-warning" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <ul class="p-0 m-0">
                        @foreach (var item in ViewBag.totalcommunications)
                        {
                            <li class="d-flex justify-content-between mb-3">
                                <div class="lh-1 d-flex align-items-center me-3">
                                    <span class="badge badge-dot bg-success me-2"></span> @item.Name
                                </div>
                                <div class="gap-3 d-flex">
                                    <span>@item.TotalCount</span>
                                    <span class="fw-semibold">%@item.TypeComp</span>
                                </div>
                            </li>

                        }

                    </ul>
                </div>
            </div>
        </div>

        <!--user all-->
        <!--user all-->
        <div class="col-md-6 col-lg-6 col-xl-4 mb-4 mt-4 mb-xl-0 ">
            <div class="card h-100">
                <div class="card-header">
                     <div class="content-left">
                      <span> انواع البلاغات  </span>

                   <div class="d-flex align-items-end mt-2">
                    <h1 class="display-8 fw-normal mb-0">@ViewBag.TotalCommun</h1>
                </div>
                <div class="card-body">

                    @*<span class="d-block mb-2">الاحصائات الحالية</span>*@
                    <div >
                        <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-info" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        <div class="progress-bar bg-warning" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <ul class="p-0 m-0">
                        @foreach (var item in ViewBag.TypeCommuncations)
                        {
                            <li class="d-flex justify-content-between mb-3">
                                <div class="lh-1 d-flex align-items-center me-3">
                                    <span class="badge badge-dot bg-success me-2"></span> @item.Name
                                </div>
                                <div class="gap-3 d-flex">
                                    <span>@item.TotalCount</span>
                                    <span class="fw-semibold">%@item.TypeComp</span>
                                </div>
                            </li>

                        }

                    </ul>
                </div>
            </div>
        </div>

        <!--user all-->

    </div>

</div>
<script>
    // تحديث العدادات باستخدام البيانات الحالية
    function updateStatistics() {
        document.getElementById('totalUsers').innerText = '@ViewBag.totalUsers';
        document.getElementById('totalComp').innerText = '@ViewBag.totalComp';
        document.getElementById('TotalCommun').innerText = '@ViewBag.TotalCommun';
    }

    // استدعاء تحديث الإحصائيات عند تحميل الصفحة
    window.onload = function () {
        updateStatistics();
    };
</script>

@section Scripts{

    <script src="../../assets/js/charts-apex.js"></script>
    <script src="../../assets/js/MyCharts/ExpenseRatio.js"></script>
    <script src="../../assets/apexcharts/dist/apexcharts.js"></script>
   
}